{% load static %}
{% load sekizai_tags %}

{% addtoblock "css" %}
<link rel="stylesheet" href="{% static 'amy/css/home.css' %}" />
{% endaddtoblock %}

<div class="col-md-2" id="events">
  <div class="row account">
    <div class="row buffer"></div>
    <div class="row info">
      {% if user.is_authenticated %}
        <div class="col-md-6">
          Hi {{ user.get_short_name }}!
        </div>
        <div class="col-md-6" id="outbtn">
            <a class="btn btn-info" href="{% url 'logout'%}?next={{request.path}}">Logout</a>
        </div>
     {% else %}
     <div class="row" id="inbtn">
          <a class="btn btn-info" href="{% url 'login'%}?next={{request.path}}">Login</a>
        </div>
     {% endif %}
    </div>
    <div class="row buffer"></div>
  </div>
  {% for title, date, description in event_posts %}
    <div class="row event_post" id="{{ title }}">
      <div> {{ title }} </div>
    </div>
  {% endfor %}
</div>
<div class="col-md-10 viewport" id="event_page">
      {% include "photaHome/loadmask.html" %}
</div>

{% addtoblock "js" %}
<script>
  //On Doc Ready, Set the subpage height to a fixed amount.
  var pageBarHeight = $('.links').css('height').replace(/[^-\d\.]/g, '');
  var subpageHeight = $(document).height() - (Number.parseFloat(pageBarHeight)+2);
  $('#events').css('height', subpageHeight + 'px');
  $('#event_page').css('height', subpageHeight + 'px');
</script>

{% endaddtoblock %}
